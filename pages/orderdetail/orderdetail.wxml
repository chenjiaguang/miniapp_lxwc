<!--pages/orderdetail/orderdetail.wxml-->
<list-loader visible="{{!loaded}}" />
<view class='page-orderdetail'>
  <view class='order-data' wx:if="{{order && order.id && order.name}}">
    <view class='header'>
      <image class='avatar' src="{{order.pic}}"></image>
      <text class='title'>{{order.name}}</text>
      <text class='status'>{{statusText[order.status]}}</text>
    </view>
    <view class='line-separator-h' style="width:718rpx;margin-left:32rpx;"></view>
    <view class='content'>
      <view class='content-item num'>
        <text>订单号：</text>
        <text>{{order.id}}</text>
      </view>
      <view class='content-item time'>
        <text>付款时间：</text>
        <text>{{order.date}}</text>
      </view>
    </view>
    <view class='line-separator-h' style="width:718rpx;margin-left:32rpx;"></view>
    <view wx:if="{{order.huodong && order.huodong[0]}}" class='discount-box'>
      <block wx:for="{{order.huodong}}" wx:for-item="hd" wx:key="*this">
        <!-- 新客 -->
        <icon-text-box wx:if="{{hd.type == 3}}" text-icon="新客" text-icon-color="#F700FF" title="平台新用户立减{{hd.discount}}元" sub-title="{{hd.discount}}" show-money-sign="{{true}}" />
        <!-- 首减   -->
        <icon-text-box wx:if="{{hd.type == 4}}" text-icon="首减" text-icon-color="#007AFF" title="门店新用户立减" sub-title="{{hd.discount}}" show-money-sign="{{true}}" />
        <!-- 满减 -->
        <icon-text-box wx:if="{{hd.type == 1}}" text-icon="满减" text-icon-color="#E8541E" title="满减优惠" sub-title="{{hd.discount}}" show-money-sign="{{true}}" />
      </block>
    </view>
    <view wx:if="{{order.huodong && order.huodong[0]}}" class='line-separator-h' style="width:718rpx;margin-left:32rpx;"></view>
    <view class='overview'>
    <view class='total'><text>订单总价：</text><text class='iconfont icon-renminbi' style="font-size:26rpx;color:#6E6E6E"></text><text>{{order.total}}</text></view>
    <view class='discounted' wx:if="{{order.discount}}"><text>已优惠：-</text><text class='iconfont icon-renminbi' style="font-size:26rpx;color:#6E6E6E"></text><text>{{order.discount}}</text></view>
    <view class='actual'><text style="font-weight:bold;color:#6E6E6E">实付：</text><text class='iconfont icon-renminbi' style="font-size:28rpx;color:#F24724"></text><text>{{order.actual}}</text></view>
    </view>
  </view>
  <!-- 查不到该订单 -->
  <view wx:if="{{(!order || (order && (!order.id || !order.name))) && loaded}}" class='empty-order'>
    <image class='empty-image' src="/assets/images/empty_order.png"></image>
    <view class='empty-tip'>暂无订单</view>
  </view>
</view>