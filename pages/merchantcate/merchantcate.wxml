<!--pages/merchantcate/merchantcate.wxml-->
<view class='page-merchantcate'>
  <!-- 搜索框 -->
  <view class='search-box' catchtap="goSearchPage">
    <text class='iconfont icon-search'></text>
    <text class='search-text'>搜索品牌、门店、商品...</text>
  </view>
  <!-- 二级分类 -->
  <scroll-view class='merchant-cate' scroll-x>
    <view class='merchant-cate-content'>
      <view class="cate{{idx === 0 ? ' first' : ''}}{{(idx === (merchantCates.length - 1)) ? ' last' : ''}}" wx:for="{{merchantCates}}" wx:for-item="cate" wx:for-index="idx" wx:key="id">
        <image class='cate-image' src="{{cate.banner}}" mode="aspectFill"></image>
        <view class='cate-text'>{{cate.title}}</view>
      </view>
    </view>
  </scroll-view>
  <!-- 乐享商家 -->
  <view class='lx-merchants'>
    <view class='lx-merchants-header'>
      <view class="lx-merchants-header-title current">
        <text>乐享商家</text>
        <view class='lx-merchants-header-title-line'></view>
      </view>
      <view class='lx-filter'>
        <picker bindchange="changeLxCate" value="{{currentCate}}" range="{{lxCates}}" range-key="title">
          <text class='lx-filter-text'>{{lxCates[currentCate].title}}</text>
        </picker>
        <text class='iconfont icon-pull_down'></text>
      </view>
      <view class='sort-type'>
        <view catchtap="changeSort" data-sort="{{0}}" class="sort-type-distance {{currentSort === 0 ? 'current' : ''}}">距离</view>
        <view class='line-separator-v' style="height:24rpx;"></view>
        <view catchtap="changeSort" data-sort="{{1}}" class="sort-type-hot {{currentSort === 1 ? 'current' : ''}}">人气</view>
      </view>
      <view class='lx-merchants-header-line'></view>
    </view>
    <view class='lx-merchants-body'>
      <merchant-overview wx:for="{{lxMerchants}}" wx:for-item="merchant" wx:key="id" merchant="{{merchant}}" />
    </view>
  </view>
</view>